file(GLOB TESTS *.c)
foreach(TEST ${TESTS})
  get_filename_component(TEST_BASENAME ${TEST} NAME_WE)
  set(TEST_NAME "${JANUS_TEST_IMPLEMENTATION}_test_${TEST_BASENAME}")
  add_executable(${TEST_NAME} ${TEST})
  target_link_libraries(${TEST_NAME} ${JANUS_TEST_IMPLEMENTATION})
  install(TARGETS ${TEST_NAME} RUNTIME DESTINATION bin)
  add_test(NAME ${TEST_NAME} WORKING_DIRECTORY ${CMAKE_BINARY_DIR} COMMAND ${TEST_NAME} ${JANUS_TEST_SDK_PATH})
endforeach()
